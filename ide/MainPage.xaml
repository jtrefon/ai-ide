<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="ide.MainPage">
    <ContentPage.MenuBarItems>
        <MenuBarItem Text="File">
            <MenuFlyoutItem Text="Open File…" Clicked="OnOpenFileMenuClicked">
                <MenuFlyoutItem.KeyboardAccelerators>
                    <KeyboardAccelerator Key="O" Modifiers="Windows" />
                </MenuFlyoutItem.KeyboardAccelerators>
            </MenuFlyoutItem>
            <MenuFlyoutItem Text="Open Project…" Clicked="OnOpenProjectMenuClicked" />
            <MenuFlyoutSeparator />
            <MenuFlyoutItem Text="Save File" Clicked="OnSaveFileMenuClicked">
                <MenuFlyoutItem.KeyboardAccelerators>
                    <KeyboardAccelerator Key="S" Modifiers="Windows" />
                </MenuFlyoutItem.KeyboardAccelerators>
            </MenuFlyoutItem>
            <MenuFlyoutItem Text="Save Project (All)" Clicked="OnSaveProjectMenuClicked" />
        </MenuBarItem>
    </ContentPage.MenuBarItems>
    <Grid RowDefinitions="*" ColumnDefinitions="280,*,360" Padding="0">
        <!-- Explorer Panel (Left) -->
        <Border Grid.Column="0" StrokeThickness="1" Stroke="LightGray" Padding="8">
            <VerticalStackLayout Spacing="8">
                <Label Text="Explorer" FontAttributes="Bold" />
                <CollectionView x:Name="FileList" SelectionMode="Single" SelectionChanged="OnFileSelected">
                    <CollectionView.ItemTemplate>
                        <DataTemplate>
                            <Label Text="{Binding}" />
                        </DataTemplate>
                    </CollectionView.ItemTemplate>
                </CollectionView>
            </VerticalStackLayout>
        </Border>

        <!-- Center Column (Editor over Terminal) -->
        <Grid Grid.Column="1" RowDefinitions="*,220" ColumnDefinitions="*" Padding="0">
            <!-- Editor (Top) -->
            <Border Grid.Row="0" StrokeThickness="1" Stroke="LightGray" Padding="8">
                <Grid RowDefinitions="Auto,*" ColumnDefinitions="*">
                    <Label Grid.Row="0" Grid.Column="0" Text="Editor" FontAttributes="Bold" />
                    <Editor Grid.Row="1" Grid.Column="0" x:Name="EditorView" AutoSize="TextChanges" Placeholder="Open a file to start editing..." />
                </Grid>
            </Border>

            <!-- Terminal (Bottom) -->
            <Border Grid.Row="1" StrokeThickness="1" Stroke="LightGray" Padding="8">
                <Grid RowDefinitions="Auto,*" ColumnDefinitions="*" ColumnSpacing="8" RowSpacing="8">
                    <Label Grid.Row="0" Grid.Column="0" Text="Terminal" FontAttributes="Bold" />
                    <Editor Grid.Row="1" Grid.Column="0" x:Name="TerminalView"
                            FontFamily="Menlo"
                            AutoSize="Disabled"
                            IsSpellCheckEnabled="False"
                            IsTextPredictionEnabled="False"
                            TextChanged="OnTerminalTextChanged" />
                </Grid>
            </Border>
        </Grid>

        <!-- Right Panel: AI Chat -->
        <Border Grid.Column="2" StrokeThickness="1" Stroke="LightGray" Padding="8">
            <VerticalStackLayout Spacing="8">
                <Label Text="AI Chat" FontAttributes="Bold" />
                <Label Text="Conversational agent will appear here." FontSize="12" TextColor="Gray" />
            </VerticalStackLayout>
        </Border>
    </Grid>
</ContentPage>
